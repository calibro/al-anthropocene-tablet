<ion-view title="create">
    <ion-content class="scrollable" padding="true">
      <div class="ent-menu">
          <span on-tap="tab='themes'" ng-class="{'menu-active':tab == 'themes'}" class="menu-ls">THEMES<sup ng-show="selectedThemes.length">{{selectedThemes.length}}</sup></span>
          <span on-tap="tab='speakers'" ng-class="{'menu-active':tab == 'speakers'}" class="menu-ls">SPEAKERS<sup ng-show="selectedSpeakers.length">{{selectedSpeakers.length}}</sup></span>
          <span on-tap="tab='places'" ng-class="{'menu-active':tab == 'places'}" class="menu-ls">PLACES<sup ng-show="selectedPlaces.length">{{selectedPlaces.length}}</sup></span>
      </div>
      <div class="ent-rightmenu">
          <div ng-click="reset()">reset</div>
          <div ng-click="goBack()">back</div>
      </div>


      <ion-scroll direction="x" scrollbar-x="false">

          <div class="ent-pane">
          <div ng-show="tab=='themes'" class="ent-list" ng-repeat="t in keys(themes)">
              <div class="first-letter">{{t}}</div>
              <div class="word-list">
                <div ng-class="{'tag-sel':w.selected}" on-tap="toggleEntity(w)" ng-repeat="w in themes[t] track by $index" class="word"><i ng-show="w.selected" class="ion-close-circled"> </i> {{w.name}}</div>
              </div>
          </div>

            <div ng-show="tab=='speakers'" class="ent-list" ng-repeat="t in keys(speakers)">
                <div class="first-letter">{{t}}</div>
                <div class="word-list">
                    <div ng-class="{'tag-sel':w.selected}" on-tap="toggleEntity(w)" ng-repeat="w in speakers[t] track by $index" class="word"><i ng-show="w.selected" class="ion-close-circled"> </i> {{w.name.split(",")[0]}}</div>
                </div>
            </div>

            <div ng-show="tab=='places'" class="ent-list" ng-repeat="t in keys(places)">
                <div class="first-letter">{{t}}</div>
                <div class="word-list">
                    <div ng-class="{'tag-sel':w.selected}" on-tap="toggleEntity(w)" ng-repeat="w in places[t] track by $index" class="word"><i ng-show="w.selected" class="ion-close-circled"> </i> {{w.name}}</div>
                </div>
            </div>
        </div>
      </ion-scroll>

        <ion-scroll class="chunk-scroll" scrollbar-x="false" direction="x" delegate-handle="chunks">
            <div class="help-3-cont" ng-show="!chunks.length">
                <div class="help-3-ar"><i class="ion-android-arrow-up"></i></div>
                <div class="help-3-txt">Select a maximum of 3 topics among themes, speakers or places to create a new video</div>
            </div>
            <div class="chunk-pane">

              <!--  <div on-tap="selectVideo(c)" collection-repeat="c in chunks" item-wisth="640" item-height="100%" class="chunk">-->
                <div ng-repeat="c in chunks"  id="{{c.id}}" on-tap="deselectChunk(c.id)" class="chunk">
                    <div ng-class="{'selected-chunk':selectedChunk==c.id,'blurred-chunk':selectedChunk!=c.id && selectedChunk!=''}" class="chunk-main" ng-style="{'background-image':'url('+getThumb(c)+')'}">
                        <div class="chunk-control">
                           <!-- <div class="chunk-duration">{{c.duration | dateFilter}}</div> -->
                            <div class="chunk-title" ng-style="{'margin':c.selected?'0px auto'  : '0px 0px 0px 10px'}">
                                <span ng-repeat="s in c.speakers">{{s.name.split(",")[0]}}{{$last ? '' : ', '}}</span>
                            </div>
                            <div ng-show="selectedChunk==c.id" class="chunk-move">
                                <i on-tap="swapVideo('start',$index,c.id)" ng-style="{'opacity':$first ? 0 : 1}" class="ion-ios-skipbackward" > </i>
                                <i on-tap="swapVideo(-1,$index,c.id)" ng-style="{'opacity':$first ? 0 : 1}" class="ion-arrow-left-b" > </i>
                                <i></i>
                                <i on-tap="swapVideo(1,$index,c.id)" ng-style="{'opacity':$last ? 0 : 1}" class="ion-arrow-right-b" > </i>
                                <i on-tap="swapVideo('end',$index,c.id)" ng-style="{'opacity':$last ? 0 : 1}" class="ion-ios-skipforward" > </i>
                            </div>


                            <div ng-click="selectVideo(c)" ng-hide="selectedChunk==c.id" class="chunk-play">
                              <span>edit</span>
                            </div>


                                <div ng-show="selectedChunk==c.id" class="chunk-play">
                                  <span on-tap="gotoPreview(c.id)">view info</span>
                                  <span on-tap="removeChunk($index)">remove</span>
                                </div>

                        </div>



                            <!--
                            <div class="chunk-themes"><b>Themes:</b> <span ng-repeat="th in c.themes">{{th.name}}{{$last ? '' : ', '}}</span></div>
                            <div class="chunk-places"><b>Places:</b> <span ng-repeat="pl in c.places">{{pl.name}}{{$last ? '' : ', '}}</span></div>
                            -->

                    </div>

                </div>
            </div>
        </ion-scroll>
        <timeline></timeline>
        <div ng-show="chunks.length" on-tap="play()" class="play-button">
            <i class="ion-ios-play play"></i>
        </div>

      <div class="help-limit" ng-show="limitReached">

        You already selected 3 topics.
        <br/>
        Play the sequence or remove one of the existing selections.

      </div>

    </ion-content>
</ion-view>
